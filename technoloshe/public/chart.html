<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart", 'controls']});

      function drawVisualization() {

		var query = new google.visualization.Query(
        'http://www.google.com/fusiontables/gvizdata?tq=');

		query.setQuery("SELECT Year, 'Female Bachelor CS Degrees Awarded', 'Male Bachelor CS Degrees Awarded' FROM 1zB07PNMUU_QXbhdDSEQK2ZXsDKJ4xzSzpIWtD5w");
		query.send(handleQueryResponse);
    }

	function handleQueryResponse(response) {
		if (response.isError()) {
		  alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
		  return;
		}

		// Create a dashboard.
        var dashboard = new google.visualization.Dashboard(
            document.getElementById('visualization_div'));

		var pickSeries = new google.visualization.ControlWrapper({
		  'controlType': 'CategoryFilter',
          'containerId': 'filter_div',
          'options': {
            'filterColumnLabel': 'Year'
          }
        });

		var data = response.getDataTable();

		var lineChart = new google.visualization.ChartWrapper({
        "containerId": "chart_div",
        "refreshInterval": 5,
        "chartType": "LineChart",
        "options": {
          "title":"Yearly US Computer Science Bachelor's Degrees Awarded by Sex",
          "hAxis": {"title": "Year"},
          "vAxis": {"title": "CS Bachelor's Degrees Awarded"}
        }
      });

	  dashboard.bind(pickSeries, lineChart);
	  dashboard.draw(data);
	}

    google.setOnLoadCallback(drawVisualization);
  </script>
</head>
<body style="font-family: Arial;border: 0 none;">
  <div id="visualization_div" style="width: 800px; height: 400px;">
	<!--Divs that will hold each control and chart-->
      <div id="filter_div"></div>
      <div id="chart_div" style="width: 600px; height: 400px;"></div>
</div>
</body>
</html>

